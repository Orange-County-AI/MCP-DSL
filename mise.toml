[tools]
bun = "latest"
node = "latest"  # For npm compatibility if needed

[tasks.test]
description = "Run MCP-DSL test suite"
run = "bun test"

[tasks.test-watch]
description = "Run tests in watch mode"
run = "bun test --watch"

[tasks.lint]
description = "Validate DSL files in examples/"
run = """
if [ -d examples ]; then
  for file in examples/*.mcp; do
    [ -f "$file" ] && bun run src/cli.ts lint -i "$file"
  done
else
  echo "No examples directory found"
fi
"""

[tasks.format]
description = "Format DSL files in examples/"
run = """
if [ -d examples ]; then
  for file in examples/*.mcp; do
    [ -f "$file" ] && bun run src/cli.ts format -i "$file" -o "$file"
  done
else
  echo "No examples directory found"
fi
"""

[tasks.build]
description = "Build CLI tool (verify it runs)"
run = "bun run src/cli.ts --help"

[tasks.check]
description = "Run all checks (tests + lint)"
run = "mise run test && mise run build"
